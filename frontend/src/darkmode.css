/* Dark mode transitions */
* {
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }
  
  /* Smoothly transition between light and dark mode */
  .dark-mode .MuiPaper-root,
  .light-mode .MuiPaper-root,
  .dark-mode .MuiAppBar-root,
  .light-mode .MuiAppBar-root,
  .dark-mode .MuiCard-root,
  .light-mode .MuiCard-root,
  .dark-mode .MuiButton-root,
  .light-mode .MuiButton-root {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }
  
  /* SVG icons color transition */
  .dark-mode svg path,
  .light-mode svg path {
    transition: fill 0.3s ease, stroke 0.3s ease;
  }
  
  /* Improve dark mode text contrast */
  .dark-mode .MuiTypography-root {
    color: rgba(255, 255, 255, 0.95);
  }
  
  .dark-mode .MuiTypography-colorTextSecondary {
    color: rgba(255, 255, 255, 0.7);
  }
  
  /* Special styling for charts in dark mode */
  .dark-mode .recharts-cartesian-grid-horizontal line,
  .dark-mode .recharts-cartesian-grid-vertical line {
    stroke: rgba(255, 255, 255, 0.1);
  }
  
  .dark-mode .recharts-text {
    fill: rgba(255, 255, 255, 0.7);
  }
  
  /* Theme toggle animation */
  @keyframes rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  .theme-toggle-rotate {
    animation: rotate 0.5s ease;
  }
  
  /* Dark mode tooltip improvements */
  .dark-mode .MuiTooltip-tooltip {
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
  }
  
  /* Dark mode card and section outlines */
  .dark-mode .MuiCard-root,
  .dark-mode .MuiPaper-root {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  }
  
  /* Force background colors in dark mode for specific components */
  .dark-mode .MuiPaper-root {
    background-color: #1e1e1e !important;
  }
  
  /* Sample Format white textarea fix */
  .dark-mode textarea,
  .dark-mode .MuiOutlinedInput-root textarea,
  .dark-mode .MuiInputBase-root textarea {
    background-color: #252525 !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Fix for white sample format in Image 2 */
  .dark-mode [style*="background-color: white"] {
    background-color: #252525 !important;
  }
  
  .dark-mode .MuiPaper-root .MuiBox-root [style*="background-color: white"] {
    background-color: #252525 !important;
  }
  
  /* Fix Total Weight panel from Image 4 */
  .dark-mode [style*="backgroundColor: rgba(76, 175, 80, 0.08)"],
  .dark-mode [style*="backgroundColor: rgba(244, 67, 54, 0.08)"],
  .dark-mode [style*="backgroundColor: rgb(244, 67, 54, 0.08)"],
  .dark-mode [style*="backgroundColor: rgb(76, 175, 80, 0.08)"] {
    background-color: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
  }
  
  /* Fix for Blackboard Import and Manual Input cards */
  .dark-mode .MuiButton-outlined,
  .dark-mode .MuiButton-contained {
    background-color: transparent; /* Reset before applying custom backgrounds */
  }
  
  .dark-mode .MuiButton-outlined {
    border-color: rgba(255, 255, 255, 0.23);
    color: rgba(255, 255, 255, 0.9);
  }
  
  .dark-mode .MuiButton-outlined:hover {
    background-color: rgba(255, 255, 255, 0.08);
  }
  
  .dark-mode .MuiButton-contained:not(.MuiButton-containedPrimary):not(.MuiButton-containedSecondary) {
    background-color: #252525;
    color: rgba(255, 255, 255, 0.9);
  }
  
  /* Fix for Input Mode buttons (Blackboard Import/Manual Input) */
  .dark-mode .MuiButtonGroup-root .MuiButton-root,
  .dark-mode .grade-input-button {
    background-color: #252525 !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  .dark-mode .MuiButtonGroup-root .MuiButton-root.Mui-selected,
  .dark-mode .grade-input-button.selected {
    background-color: #3f51b5 !important;
    color: white !important;
  }
  
  /* Fix specific issues for the grade table cells */
  .dark-mode .MuiTableCell-root {
    background-color: #252525 !important;
    color: rgba(255, 255, 255, 0.9) !important;
    border-bottom-color: rgba(255, 255, 255, 0.1) !important;
  }
  
  .dark-mode .MuiTableHead-root .MuiTableCell-root {
    background-color: #303030 !important;
    color: white !important;
  }
  
  .dark-mode .MuiTableRow-root:hover .MuiTableCell-root {
    background-color: #303030 !important;
  }
  
  /* Fix for alternating table row colors */
  .dark-mode .MuiTableRow-root:nth-of-type(odd) .MuiTableCell-body {
    background-color: #252525 !important;
  }
  
  .dark-mode .MuiTableRow-root:nth-of-type(even) .MuiTableCell-body {
    background-color: #2a2a2a !important;
  }
  
  /* Form inputs and text fields */
  .dark-mode .MuiOutlinedInput-root {
    background-color: #1e1e1e !important;
  }
  
  .dark-mode .MuiOutlinedInput-notchedOutline {
    border-color: rgba(255, 255, 255, 0.2) !important;
  }
  
  .dark-mode .MuiInputBase-input {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  .dark-mode .MuiInputLabel-root {
    color: rgba(255, 255, 255, 0.7) !important;
  }
  
  /* Make sure sample format text area is dark */
  .dark-mode textarea {
    background-color: #252525 !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Calculator specific components */
  .dark-mode .MuiStepIcon-root {
    color: rgba(255, 255, 255, 0.2) !important;
  }
  
  .dark-mode .Mui-active .MuiStepIcon-root {
    color: #7581d6 !important;
    filter: brightness(1.2);
  }
  
  .dark-mode .Mui-completed .MuiStepIcon-root {
    color: #7581d6 !important;
  }
  
  .dark-mode .MuiStepLabel-label {
    color: rgba(255, 255, 255, 0.5) !important;
  }
  
  .dark-mode .Mui-active .MuiStepLabel-label {
    color: #7581d6 !important;
    font-weight: 600 !important;
  }
  
  .dark-mode .Mui-completed .MuiStepLabel-label {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Add color indicators for dark mode stepper */
  .dark-mode .MuiStepConnector-root {
    background: transparent !important;
  }
  
  .dark-mode .MuiStepConnector-line {
    border-color: rgba(255, 255, 255, 0.2) !important;
    border-top-width: 2px !important;
  }
  
  .dark-mode .Mui-active .MuiStepConnector-line,
  .dark-mode .MuiStepConnector-root.Mui-active .MuiStepConnector-line {
    border-color: #7581d6 !important;
    border-top-width: 2px !important;
  }
  
  .dark-mode .Mui-completed .MuiStepConnector-line,
  .dark-mode .MuiStepConnector-root.Mui-completed .MuiStepConnector-line {
    border-color: #7581d6 !important;
    border-top-width: 2px !important;
  }
  
  /* Results page specific fixes */
  .dark-mode .MuiCollapse-root .MuiPaper-root {
    background-color: #252525 !important;
  }
  
  /* Fix for linear progress bars */
  .dark-mode .MuiLinearProgress-root {
    background-color: rgba(255, 255, 255, 0.1) !important;
  }
  
  /* Specific fixes for the grade table in results view */
  .dark-mode .AssignmentTable-root {
    background-color: #1e1e1e !important;
  }
  
  .dark-mode .CategoryBreakdown-root {
    background-color: #1e1e1e !important;
  }
  
  /* Alert component backgrounds */
  .dark-mode .MuiAlert-standardInfo {
    background-color: rgba(33, 150, 243, 0.15) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  .dark-mode .MuiAlert-standardSuccess {
    background-color: rgba(76, 175, 80, 0.15) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  .dark-mode .MuiAlert-standardWarning {
    background-color: rgba(255, 152, 0, 0.15) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  .dark-mode .MuiAlert-standardError {
    background-color: rgba(244, 67, 54, 0.15) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Force consistent text input background colors */
  .dark-mode textarea,
  .dark-mode input[type="text"],
  .dark-mode input[type="number"],
  .dark-mode input[type="email"],
  .dark-mode input[type="password"] {
    background-color: #1e1e1e !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Fix for the Results page grade card (76%) */
  .dark-mode .MuiPaper-root.MuiCard-root {
    background-color: #1e1e1e !important;
  }
  
  /* Fix for the grade summary box with the percentage */
  .dark-mode .MuiBox-root[style*="borderRadius: 20px"] {
    background-color: #1e1e1e !important;
  }
  
  /* Fix for Enter What-If Mode button container */
  .dark-mode .MuiPaper-root.MuiPaper-elevation.MuiPaper-rounded {
    background-color: #1e1e1e !important;
  }
  
  /* Fix for the sidebar category cards (Homework, Participation, Quizzes) */
  .dark-mode .MuiPaper-root .MuiBox-root .MuiPaper-root {
    background-color: #1e1e1e !important;
  }
  
  /* Fix for the grade number box in the left panel */
  .dark-mode .MuiBox-root[style*="background-color: rgb(255, 255, 255)"],
  .dark-mode .MuiBox-root[style*="background-color: white"] {
    background-color: #252525 !important;
  }
  
  /* Fix for the category cards on sidebar */
  .dark-mode .MuiPaper-root .MuiBox-root .MuiPaper-root .MuiBox-root .MuiPaper-root {
    background-color: #212121 !important; 
  }
  
  /* Target the progress bars container in sidebar */
  .dark-mode .MuiBox-root .MuiBox-root[style*="background-color: white"] {
    background-color: #252525 !important;
  }
  
  /* Style the 76% box on the left panel specifically */
  .dark-mode .MuiBox-root[style*="width: 40px"] {
    background-color: transparent !important;
  }
  
  /* Make sure the Results page components use dark mode consistently */
  .dark-mode .GradeSummary-root,
  .dark-mode .CategoryBreakdown-root,
  .dark-mode .AssignmentTable-root {
    background-color: #1e1e1e !important;
  }
  
  /* Fix the grade cards in the sidebar */
  .dark-mode .MuiBox-root > .MuiPaper-root {
    background-color: #1e1e1e !important;
  }
  
  /* Super specific selector for the sidebar white cards */
  .dark-mode [style*="display: grid"] > [style*="background-color: white"] {
    background-color: #1e1e1e !important;
  }
  
  /* Target all elements with white background */
  .dark-mode *[style*="background: white"],
  .dark-mode *[style*="background:#ffffff"],
  .dark-mode *[style*="background: #fff"],
  .dark-mode *[style*="background-color: white"],
  .dark-mode *[style*="background-color: #fff"],
  .dark-mode *[style*="background-color: rgb(255, 255, 255)"] {
    background-color: #1e1e1e !important;
    background: #1e1e1e !important;
  }
  
  /* Specific fix for the grade percentage box in the left panel */
  .dark-mode .MuiBox-root[style*="borderRadius: \"12px\""] {
    background-color: transparent !important;
  }
  
  /* Override inline styles that use !important */
  @layer override {
    .dark-mode .MuiPaper-root {
      background-color: #1e1e1e !important;
    }
    
    /* Fix any component with a custom gradient background in dark mode */
    .dark-mode *[style*="linear-gradient"],
    .dark-mode .MuiCard-root,
    .dark-mode .MuiPaper-root {
      background: transparent !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
    }
    
    /* Fix for Major GPA components */
    .dark-mode .MajorGpa-container,
    .dark-mode [data-major-gpa="true"] {
      background-color: transparent !important;
    }
    
    .dark-mode div[style*="background-color: white"] {
      background-color: #1e1e1e !important;
    }
    
    .dark-mode textarea[style*="background-color:"],
    .dark-mode input[style*="background-color:"] {
      background-color: #1e1e1e !important;
    }
    
    /* Fix specifically for the Category Name and Weight input fields */
    .dark-mode .MuiInputBase-root.MuiOutlinedInput-root,
    .dark-mode .css-q6yh0s-MuiInputBase-root-MuiOutlinedInput-root,
    .dark-mode [class*="MuiInputBase-root"][class*="MuiOutlinedInput-root"] {
      background-color: #1e1e1e !important;
    }
    
    .dark-mode .MuiInputBase-input.MuiOutlinedInput-input,
    .dark-mode .css-j3jqhj-MuiInputBase-input-MuiOutlinedInput-input,
    .dark-mode [class*="MuiInputBase-input"][class*="MuiOutlinedInput-input"] {
      color: rgba(255, 255, 255, 0.9) !important;
      background-color: #1e1e1e !important;
    }
    
    .dark-mode .MuiFormControl-root.MuiTextField-root input {
      background-color: #1e1e1e !important;
    }
    
    /* Target the fieldset outline */
    .dark-mode .MuiOutlinedInput-notchedOutline,
    .dark-mode [class*="MuiOutlinedInput-notchedOutline"] {
      border-color: rgba(255, 255, 255, 0.2) !important;
    }
    
    /* Fix for the footer links */
    .dark-mode a {
      color: rgba(255, 255, 255, 0.8) !important;
    }
    
    /* Fix for the current grade display (70%) */
    .dark-mode .MuiPaper-root {
      background: #1e1e1e !important;
      background-image: none !important;
    }
    
    /* Fix for Enter What-If Mode button */
    .dark-mode .MuiButton-containedPrimary {
      background: linear-gradient(90deg, #5361c9 0%, #7581d6 100%) !important;
    }
    
    /* Fix for Homework 9 assignments card */
    .dark-mode .MuiPaper-root.MuiPaper-elevation {
      background-color: #1e1e1e !important;
    }
  }
  
  /* Fix all cards with custom backgrounds in dark mode */
  .dark-mode .MuiCard-root[style*="background"],
  .dark-mode .MuiCard-root[style*="linear-gradient"],
  .dark-mode .MuiPaper-root[style*="background: linear-gradient"],
  .dark-mode .MuiBox-root[style*="background: linear-gradient"] {
    background: transparent !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
  }
  
  /* Fix for results screen stepper background issue */
  .dark-mode .MuiStepper-root {
    background-color: transparent !important;
  }
  
  .dark-mode .MuiStepper-root .MuiPaper-root,
  .dark-mode .MuiStepper-horizontal {
    background-color: #1e1e1e !important;
  }
  
  /* Target any extended stepper container that appears on results screen */
  .dark-mode .MuiStepper-root[style*="width"],
  .dark-mode .MuiStepper-root[style*="height"] {
    background-color: #1e1e1e !important;
  }
  
  /* Target stepper container and its parent elements */
  .dark-mode .MuiStepper-root .MuiStepConnector-root {
    background-color: transparent !important;
  }
  
  .dark-mode .MuiStepper-root .MuiStep-root {
    background-color: transparent !important;
  }
  
  /* Target any parent container of the stepper on results page */
  .dark-mode [role="tabpanel"] .MuiStepper-root,
  .dark-mode .MuiContainer-root .MuiStepper-root {
    background-color: #1e1e1e !important;
  }
  
  /* More targeted approach for the stepper parent */
  .dark-mode .MuiStepper-root.MuiStepper-horizontal {
    background-color: #1e1e1e !important;
  }
  
  /* Target the specific container that wraps the stepper on the results page */
  .dark-mode .MuiPaper-root:has(.MuiStepper-root) {
    background-color: #1e1e1e !important;
  }
  
  /* Target the parent of the stepper only in step 4 */
  .dark-mode [role="tabpanel"]:has(.MuiStepLabel-completed ~ .MuiStepLabel-completed ~ .MuiStepLabel-completed ~ .MuiStepLabel-active) .MuiStepper-root,
  .dark-mode [role="tabpanel"]:has(.MuiStepLabel-active:contains("Results")) .MuiStepper-root {
    background-color: #1e1e1e !important;
  }
  
  /* Fix for stepper immediate parent on results page */
  .dark-mode .MuiPaper-root > .MuiStepper-root,
  .dark-mode .MuiContainer-root > .MuiStepper-root,
  .dark-mode .MuiBox-root > .MuiStepper-root {
    background-color: #1e1e1e !important;
  }
  
  /* Fix for Footer "Like this project?" box */
  .dark-mode .MuiTypography-root:has(+ .MuiTypography-body2:contains("Check out the GitHub repository")) {
    color: var(--mui-palette-primary-main) !important;
  }
  
  .dark-mode .MuiBox-root:has(.MuiTypography-body2:contains("Check out the GitHub repository")) {
    background-color: #121212 !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
  }
  
  .dark-mode .MuiButton-root[href*="github.com"] {
    background-color: transparent !important;
    border-color: rgba(117, 129, 214, 0.5) !important;
    color: var(--mui-palette-primary-main) !important;
  }
  
  .dark-mode .MuiButton-root[href*="github.com"]:hover {
    background-color: rgba(117, 129, 214, 0.1) !important;
    border-color: var(--mui-palette-primary-main) !important;
  }
  
  /* Fix specifically for the Major GPA card */
  .dark-mode .MuiTypography-root:contains("Major GPA") ~ .MuiTypography-h4,
  .dark-mode .MuiTypography-root:contains("Major GPA") ~ .MuiTypography-h3 {
    background-color: rgba(117, 129, 214, 0.05) !important;
    padding: 6px !important;
    border-radius: 8px !important;
  }
  
  /* Fix for category headers in dark mode */
  .dark-mode .MuiPaper-root .MuiBox-root[style*="backgroundColor"][style*="display: flex"][style*="alignItems: center"][style*="justifyContent: space-between"] {
    background-color: transparent !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
  }